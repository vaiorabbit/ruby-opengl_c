require 'rake/clean'

require_relative 'c_generate_command'

CLEAN.include( FileList['../ext/opengl_c/rogl_opengl_command.c',
               ] )


task 'default' => 'wrapper'

task 'wrapper' => ['command']

task 'command' => '../ext/opengl_c/rogl_opengl_command.c'

file '../ext/opengl_c/rogl_opengl_command.c' => './gl.xml' do |t|
  open('../ext/opengl_c/rogl_opengl_command.c', 'wb') do |file|
    generate_command(file)
  end
end
